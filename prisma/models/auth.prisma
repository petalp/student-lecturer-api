enum Role {
  ADMIN
  STUDENT
  LECTURER

  @@schema("auth")
}

model User {
  user_id    Int      @id @default(autoincrement()) @db.Integer
  firstName  String   @db.VarChar(100)
  middleName String?  @db.VarChar(100)
  lastName   String   @db.VarChar(100)
  username   String   @unique @db.VarChar(100)
  email      String   @unique @db.VarChar(159)
  password   String   @db.VarChar(100)
  isActive   Boolean  @db.Boolean @default(true)
  role       Role
  sex        String   @db.VarChar(10)
  createAt   DateTime @default(now()) @db.Timestamp()
  updateAt   DateTime @updatedAt @db.Timestamp()

  student  Student?
  lecturer Lecturer?
  token    Tokens[]
  profile UserProfile?

  @@index([email])
  @@map("users")
  @@schema("auth")
}
 
model UserProfile{
 id Int @id @default(autoincrement()) @db.Integer @map("user_profile_id")
 userId Int @db.Integer @map("user_id") @unique
 address String @db.VarChar(255) @map("address")
 city String @db.VarChar(255) @map("city")
 country String @db.VarChar(255) @map("country")
 phoneNumber String @db.VarChar(20) @map("phone_number")
 dateOfBirth DateTime @db.Date @map("date_of_birth")

 user User @relation(fields:[userId], references:[user_id])

 @@schema("auth")
 @@map("user_profiles")
}
model Tokens {
  token_id  Int      @id @default(autoincrement()) @db.Integer
  userId    Int      @db.Integer
  token     String   @db.VarChar(1000)
  ipAddress String   @db.Inet()
  location  String   @db.VarChar(100)
  createAt  DateTime @default(now()) @db.Timestamp()
  updatedAt DateTime @updatedAt @db.Timestamp()

  user User @relation(fields: [userId], references: [user_id])

  @@map("tokens")
  @@schema("auth")
}